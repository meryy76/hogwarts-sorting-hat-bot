<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–†–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è –®–ª—è–ø–∞ ‚Äî WebApp</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{--gold:#d3b36c;--paper:#f5e6c0;--glass:rgba(0,0,0,.55);--shadow:0 10px 30px #0006}
*{box-sizing:border-box;margin:0;padding:0}html,body{height:100%;overflow:hidden}body{font-family:'Cinzel',serif,system-ui,sans-serif;background:#000;color:#fff}
.screen{display:none;width:100%;height:100vh;position:relative}.show{display:block}button{cursor:pointer}
/* start */
#screen-start{background:url('https://www.dropbox.com/scl/fi/9hpl00fld42suyoje2w8q/16.10.25-20-48-17.jpg?rlkey=98tp7u328o2z75i2yfinsgjn9&raw=1') center/cover no-repeat;animation:fadein 1.2s ease;overflow:hidden}
#btn-start{position:absolute;left:50%;bottom:60px;transform:translateX(-50%);background:rgba(20,12,0,.85);color:var(--paper);border:2px solid var(--gold);padding:14px 32px;border-radius:12px;font-weight:700;letter-spacing:.04em;font-size:18px;text-shadow:0 0 10px #000;box-shadow:var(--shadow);transition:all 0.3s ease;z-index:10;animation:float 3s ease-in-out infinite}
#btn-start:hover{background:rgba(40,25,5,.95);transform:translateX(-50%) scale(1.05);box-shadow:0 0 24px #d3b36c99}

/* –ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–∑—ã–∫–æ–π */
.music-control{position:absolute;top:20px;right:20px;background:rgba(20,12,0,.75);color:var(--paper);border:1px solid var(--gold);width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:100;transition:all 0.3s ease;font-size:18px}
.music-control:hover{background:rgba(40,25,5,.9);transform:scale(1.1)}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–ª–∞–≤–∞—é—â–µ–π –∫–Ω–æ–ø–∫–∏ */
@keyframes float{
  0%,100%{transform:translateX(-50%) translateY(0px);}
  50%{transform:translateX(-50%) translateY(-5px);}
}

/* –ê–Ω–∏–º–∞—Ü–∏—è —à–ª—è–ø—ã */
.hat-animation{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}
.hat-animation::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:url('https://www.dropbox.com/scl/fi/9hpl00fld42suyoje2w8q/16.10.25-20-48-17.jpg?rlkey=98tp7u328o2z75i2yfinsgjn9&raw=1') center/cover no-repeat;animation:hatSway 8s ease-in-out infinite}

/* –ê–Ω–∏–º–∞—Ü–∏—è —Å–≤–µ—á–µ–π */
.candle-flicker{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0.6}
.candle-flicker::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 30%, rgba(255,200,100,0.3) 0%, transparent 50%), radial-gradient(circle at 80% 40%, rgba(255,180,80,0.2) 0%, transparent 50%), radial-gradient(circle at 40% 70%, rgba(255,220,120,0.25) 0%, transparent 50%);animation:candleFlicker 3s ease-in-out infinite alternate}

@keyframes hatSway{
  0%,100%{transform:rotate(0deg) scale(1);}
  25%{transform:rotate(0.5deg) scale(1.001);}
  50%{transform:rotate(-0.3deg) scale(1);}
  75%{transform:rotate(0.2deg) scale(1.002);}
}

@keyframes candleFlicker{
  0%,100%{opacity:0.4;filter:blur(1px);transform:scale(1);}
  25%{opacity:0.6;filter:blur(0.5px);transform:scale(1.02);}
  50%{opacity:0.5;filter:blur(0.8px);transform:scale(0.98);}
  75%{opacity:0.7;filter:blur(0.3px);transform:scale(1.01);}
}

/* quiz */
#screen-quiz{background:url('https://www.dropbox.com/scl/fi/q3leze43a80byj0w29nrf/17.10.25-12-56-05.jpg?rlkey=4cuc8f2bfxtklvf773i29zm0z&st=3ectporj&dl=1') center/cover no-repeat;position:relative;overflow:hidden}
.quiz{width:min(920px,94vw);margin:0 auto;padding:48px 18px 24px;background:rgba(0,0,0,.65);backdrop-filter:blur(5px);border-radius:12px;box-shadow:var(--shadow);border:1px solid rgba(211,179,108,0.3);position:relative;z-index:2}
.badge{display:inline-block;padding:.38rem .7rem;border:1px solid #ffffff2a;border-radius:999px;font-size:13px;color:#ddd;background:#00000042}
.progress{height:6px;background:#1c1b28;border-radius:999px;overflow:hidden;margin:14px 0 22px}
.bar{height:100%;width:0;background:linear-gradient(90deg,#c6a66b,#e5d5a3);transition:width .35s ease}
.q{font-size:clamp(20px,2.8vw,28px);margin:8px 0 18px;text-shadow:0 2px 8px #0008;line-height:1.35}
.answers{display:grid;gap:10px}@media(min-width:640px){.answers{grid-template-columns:1fr 1fr}}
.answers button{background:#ffffff14;color:#fff;border:1px solid #ffffff28;padding:15px;border-radius:12px;font-size:16px;text-align:left;transition:all .15s ease;backdrop-filter:blur(2px)}
.answers button:hover{background:#ffffff28;border-color:#ffffff40;transform:translateY(-1px)}
.answers button:active{transform:scale(.985)}

/* –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —ç–∫—Ä–∞–Ω–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ */
.magic-candles{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}
.flying-candle{position:absolute;font-size:24px;animation:flyingCandle 8s linear infinite;opacity:0;filter:drop-shadow(0 0 8px rgba(255,200,100,0.8))}
.flying-wand{position:absolute;font-size:28px;animation:flyingWand 6s linear infinite;opacity:0;filter:drop-shadow(0 0 10px rgba(100,200,255,0.8))}
.flying-broom{position:absolute;font-size:22px;animation:flyingBroom 10s linear infinite;opacity:0;filter:drop-shadow(0 0 6px rgba(200,100,255,0.8))}

@keyframes flyingCandle{
  0%{transform:translateX(-50px) translateY(100vh) rotate(0deg);opacity:1}
  20%{opacity:0.8}
  80%{opacity:0.6}
  100%{transform:translateX(calc(100vw + 100px)) translateY(-100px) rotate(360deg);opacity:0}
}

@keyframes flyingWand{
  0%{transform:translateX(100vw) translateY(50vh) rotate(0deg);opacity:1}
  30%{opacity:0.9}
  70%{opacity:0.7}
  100%{transform:translateX(-100px) translateY(calc(100vh + 100px)) rotate(-720deg);opacity:0}
}

@keyframes flyingBroom{
  0%{transform:translateX(50vw) translateY(-50px) rotate(0deg);opacity:1}
  25%{opacity:0.8}
  75%{opacity:0.6}
  100%{transform:translateX(calc(100vw - 100px)) translateY(calc(100vh + 50px)) rotate(180deg);opacity:0}
}

/* result - –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –°–¢–ò–õ–ò */
#screen-result{background:#000;background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;padding:20px;overflow:hidden;position:relative}
.result{width:min(920px,94vw);padding:24px;border-radius:18px;background:var(--glass);border:1px solid #ffffff24;box-shadow:0 20px 60px #0008;text-align:center;position:relative;z-index:2;animation:fadein 1.1s ease}
.crest{width:120px;height:120px;margin:0 auto 12px;border-radius:50%;object-fit:cover;border:3px solid var(--gold);box-shadow:0 0 30px rgba(211,179,108,0.5), 0 0 60px rgba(211,179,108,0.3);background:#000;animation:crestGlow 3s ease-in-out infinite alternate}
.hat-quote{font-size:clamp(18px,2.8vw,24px);font-weight:700;letter-spacing:.03em;margin:8px 0 16px;min-height:60px;display:flex;align-items:center;justify-content:center;text-shadow:0 0 15px currentColor;animation:fadeInText 1.5s ease}
.desc{color:#eee;line-height:1.5;margin:12px 0 16px;font-size:clamp(14px,1.8vw,16px);animation:fadeInText 2s ease}
.tags{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin-bottom:16px;animation:fadeInText 2.5s ease}
.tag{border:1px solid #ffffff40;border-radius:999px;padding:6px 12px;font-size:12px;color:#f0f0f0;background:linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));backdrop-filter:blur(10px);box-shadow:0 2px 8px rgba(0,0,0,0.3)}
.famous{color:#f3f3ff;font-size:14px;opacity:.85;margin-bottom:16px;animation:fadeInText 3s ease}
.founder-history{color:#ddd;font-size:13px;line-height:1.4;margin:12px 0;padding:12px;background:rgba(0,0,0,0.3);border-radius:8px;border-left:2px solid var(--gold);animation:fadeInText 3.5s ease}
.history-toggle{background:transparent;color:var(--gold);border:1px solid var(--gold);padding:6px 12px;border-radius:6px;font-size:12px;margin-top:8px;cursor:pointer;transition:all 0.3s ease}
.history-toggle:hover{background:rgba(211,179,108,0.1)}
.actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:20px}
.primary,.ghost{padding:12px 20px;border-radius:12px;font-weight:700;border:1px solid transparent;transition:all .3s;font-size:14px}
.primary{background:linear-gradient(180deg,#2a2430,#1e1722);color:#fff;border-color:#3d3342}
.primary:hover{filter:brightness(1.15)}
.ghost{background:transparent;color:#fff;border-color:#ffffff28}
.ghost:hover{background:#ffffff14}

/* –ù–æ–≤—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes crestGlow{
  0%{box-shadow:0 0 20px rgba(211,179,108,0.4), 0 0 40px rgba(211,179,108,0.2);}
  100%{box-shadow:0 0 30px rgba(211,179,108,0.6), 0 0 60px rgba(211,179,108,0.4);}
}

@keyframes fadeInText{
  0%{opacity:0;transform:translateY(10px);}
  100%{opacity:1;transform:translateY(0);}
}

@keyframes hatWhisper{
  0%{opacity:0;transform:scale(0.8) translateY(10px);}
  100%{opacity:1;transform:scale(1) translateY(0);}
}

.hat-whisper{animation:hatWhisper 1.5s ease-out;color:var(--gold);text-shadow:0 0 20px currentColor}

/* magic */
.magic{position:absolute;inset:0;overflow:hidden;z-index:1;pointer-events:none}
.spark{position:absolute;width:3px;height:3px;background:#fff8d4;border-radius:50%;opacity:.75;filter:blur(1px);animation:rise 8s linear infinite}
.glow{position:absolute;inset:-20%;background:radial-gradient(60% 40% at 50% 80%,#fff2 0%,#0000 60%);mix-blend-mode:screen;opacity:.35;animation:pulse 6s ease-in-out infinite}
@keyframes rise{0%{transform:translateY(100vh) scale(.5);opacity:0}10%{opacity:.95}90%{opacity:.7}100%{transform:translateY(-10vh) scale(1.1);opacity:0}}
@keyframes fadein{from{opacity:0}to{opacity:1}}
@keyframes pulse{0%,100%{opacity:.25}50%{opacity:.45}}

/* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è iPhone 13 Pro –∏ –¥—Ä—É–≥–∏—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 390px) and (max-height: 845px) {
  .result{padding:20px 16px;margin:10px;}
  .crest{width:100px;height:100px;margin-bottom:10px;}
  .hat-quote{min-height:50px;margin:6px 0 12px;font-size:16px;}
  .desc{margin:10px 0 14px;font-size:14px;}
  .tags{margin-bottom:12px;}
  .tag{padding:4px 10px;font-size:11px;}
  .famous{font-size:13px;margin-bottom:12px;}
  .founder-history{font-size:12px;padding:10px;margin:10px 0;}
  .actions{gap:8px;margin-top:16px;}
  .primary,.ghost{padding:10px 16px;font-size:13px;}
}

/* –£–±–∏—Ä–∞–µ–º —Å–∫—Ä–æ–ª–ª –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
html, body {overflow:hidden; touch-action:pan-y;}
.screen {overflow:hidden;}
</style>
</head>
<body>
<!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏ -->
<audio id="background-music" loop>
  <source src="https://www.dropbox.com/scl/fi/m8ckie2mqoym9uy731ap0/21071.mp3?rlkey=i153x2jt5gnv96pxt44am1aee&st=7jiu3jaj&dl=1" type="audio/mpeg">
</audio>

<section id="screen-start" class="screen show">
  <div class="music-control" id="music-toggle">üéµ</div>
  <div class="hat-animation"></div>
  <div class="candle-flicker"></div>
  <button id="btn-start">–ù–ê–ß–ê–¢–¨ –†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï</button>
</section>

<section id="screen-quiz" class="screen">
  <div class="music-control" id="music-toggle-quiz">üéµ</div>
  <div class="magic-candles" id="magic-candles"></div>
  <div class="quiz">
    <div class="badge" id="badge">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 15</div>
    <div class="progress"><div class="bar" id="bar"></div></div>
    <h2 id="q" class="q"></h2>
    <div id="answers" class="answers"></div>
  </div>
</section>

<section id="screen-result" class="screen">
  <div class="music-control" id="music-toggle-result">üéµ</div>
  <div class="magic" id="magic"><div class="glow"></div></div>
  <div class="result">
    <img id="crest" class="crest" alt="–ì–µ—Ä–± —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞">
    <div id="hat-quote" class="hat-quote"></div>
    <p id="desc" class="desc"></p>
    <div id="tags" class="tags"></div>
    <div id="famous" class="famous"></div>
    <div id="founder-container" style="display:none;">
      <div id="founder-history" class="founder-history"></div>
      <button class="history-toggle" id="history-toggle">–°–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
    </div>
    <div class="actions">
      <button class="primary" id="again">–ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
      <button class="ghost" id="share">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</button>
    </div>
  </div>
</section>

<script>
/* ===== –î–ê–ù–ù–´–ï –§–ê–ö–£–õ–¨–¢–ï–¢–û–í ===== */
const HOUSES={
 GRYF:{name:"–ì—Ä–∏—Ñ—Ñ–∏–Ω–¥–æ—Ä",emoji:"ü¶Å",
  bg:"url('https://www.dropbox.com/scl/fi/4esz69ihrjdbf4fswvo3w/17.10.25-11-41-53-1.jpg?rlkey=s6qmem824w5mmvibi0cxka7v2&st=map12ioh&dl=1')",
  crest:"https://www.dropbox.com/scl/fi/wq1w5euk7troiavp1uz23/17.10.25-10-59-23.jpg?rlkey=anpi8o66dl9wbiarq3gd893na&st=i15lk6sz&dl=1",
  desc:"–§–∞–∫—É–ª—å—Ç–µ—Ç —Ö—Ä–∞–±—Ä—ã—Ö, –±–ª–∞–≥–æ—Ä–æ–¥–Ω—ã—Ö –∏ —á–µ—Å—Ç–Ω—ã—Ö. –ó–¥–µ—Å—å —Ü–µ–Ω—è—Ç —Å–º–µ–ª–æ—Å—Ç—å, —á–µ—Å—Ç—å –∏ –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å –¥—Ä—É–∑—å—è–º.",
  quote:"–®–ª—è–ø–∞ –∑–∞–¥—É–º—á–∏–≤–æ –º–æ–ª—á–∏—Ç‚Ä¶ –∏ –≤–¥—Ä—É–≥ —à–µ–ø—á–µ—Ç: –ì—Ä–∏—Ñ—Ñ–∏–Ω–¥–æ—Ä!",
  tags:["—Å–º–µ–ª–æ—Å—Ç—å","—á–µ—Å—Ç—å","–ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç—å"],
  famous:"–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä, –ì–µ—Ä–º–∏–æ–Ω–∞ –ì—Ä–µ–π–Ω–¥–∂–µ—Ä, –ê–ª—å–±—É—Å –î–∞–º–±–ª–¥–æ—Ä",
  founder:"–ì–æ–¥—Ä–∏–∫ –ì—Ä–∏—Ñ—Ñ–∏–Ω–¥–æ—Ä ‚Äî –æ–¥–∏–Ω –∏–∑ –≤–µ–ª–∏—á–∞–π—à–∏—Ö –≤–æ–ª—à–µ–±–Ω–∏–∫–æ–≤ —Å–≤–æ–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–≤–æ–µ–π —Ö—Ä–∞–±—Ä–æ—Å—Ç—å—é –∏ —Ä—ã—Ü–∞—Ä—Å–∫–∏–º–∏ –∏–¥–µ–∞–ª–∞–º–∏. –û–Ω –≤–µ—Ä–∏–ª, —á—Ç–æ –∏—Å—Ç–∏–Ω–Ω–∞—è —Å–∏–ª–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–º–µ–ª–æ—Å—Ç–∏ –∑–∞—â–∏—â–∞—Ç—å —Ç–æ, —á—Ç–æ –¥–æ—Ä–æ–≥–æ, –∏ –≤—Å–µ–≥–¥–∞ —Å—Ç–æ—è—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏."},
 SLY:{name:"–°–ª–∏–∑–µ—Ä–∏–Ω",emoji:"üêç",
  bg:"url('https://www.dropbox.com/scl/fi/vj0cuyhbhrv7dofby3xhe/17.10.25-11-41-54-1.jpg?rlkey=q365bh83moqwk04ku1b73yn1u&st=vmbqth1t&dl=1')",
  crest:"https://www.dropbox.com/scl/fi/s7q8vp6ktf6bhlspdoyt3/17.10.25-11-01-35.jpg?rlkey=8113zkmyl2m6qu8weg9vm1bjf&st=5wdbwdq3&dl=1",
  desc:"–§–∞–∫—É–ª—å—Ç–µ—Ç –∞–º–±–∏—Ü–∏–π, —Ö–∏—Ç—Ä–æ—Å—Ç–∏ –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ï–≥–æ —É—á–µ–Ω–∏–∫–∏ –¥–∞–ª—å–Ω–æ–≤–∏–¥–Ω—ã –∏ –Ω–µ –±–æ—è—Ç—Å—è —Ä–∏—Å–∫–∞.",
  quote:"–®–ª—è–ø–∞ –∑–∞–¥—É–º—á–∏–≤–æ –º–æ–ª—á–∏—Ç‚Ä¶ –∏ –≤–¥—Ä—É–≥ —à–µ–ø—á–µ—Ç: –°–ª–∏–∑–µ—Ä–∏–Ω!",
  tags:["–∞–º–±–∏—Ü–∏–∏","—Ö–∏—Ç—Ä–æ—Å—Ç—å","—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"],
  famous:"–°–µ–≤–µ—Ä—É—Å –°–Ω–µ–≥–≥, –î—Ä–∞–∫–æ –ú–∞–ª—Ñ–æ–π, –¢–æ–º –†–∏–¥–¥–ª",
  founder:"–°–∞–ª–∞–∑–∞—Ä –°–ª–∏–∑–µ—Ä–∏–Ω ‚Äî –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–æ–ª—à–µ–±–Ω–∏–∫, —Ü–µ–Ω–∏–≤—à–∏–π —á–∏—Å—Ç–æ—Ç—É –∫—Ä–æ–≤–∏ –∏ –∞–º–±–∏—Ü–∏–∏. –û–Ω –≤–µ—Ä–∏–ª, —á—Ç–æ —Ç–æ–ª—å–∫–æ –≤–æ–ª—à–µ–±–Ω–∏–∫–∏ –∏–∑ —á–∏—Å—Ç–æ–∫—Ä–æ–≤–Ω—ã—Ö —Å–µ–º–µ–π –¥–æ—Å—Ç–æ–π–Ω—ã —É—á–∏—Ç—å—Å—è –º–∞–≥–∏–∏, –∏ —Å–æ–∑–¥–∞–ª –¢–∞–π–Ω—É—é –∫–æ–º–Ω–∞—Ç—É –¥–ª—è –∑–∞—â–∏—Ç—ã –Ω–∞—Å–ª–µ–¥–∏—è –•–æ–≥–≤–∞—Ä—Ç—Å–∞."},
 RAV:{name:"–ö–æ–≥—Ç–µ–≤—Ä–∞–Ω",emoji:"ü™Ñ",
  bg:"url('https://www.dropbox.com/scl/fi/ba0c6lr5hpsf85fsow91b/17.10.25-11-41-54.jpg?rlkey=m4qjusu6zyz1131x734dgmkbq&st=fvmxhmkc&dl=1')",
  crest:"https://www.dropbox.com/scl/fi/7l0044yjn3kqfopqs06ns/17.10.25-12-35-07.jpg?rlkey=35hprzmarxy1x2wja1usrtpq6&st=bgswes52&dl=1",
  desc:"–ó–¥–µ—Å—å —Ü–µ–Ω—è—Ç —É–º, –º—É–¥—Ä–æ—Å—Ç—å –∏ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ. –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω—ã –∏ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω—ã.",
  quote:"–®–ª—è–ø–∞ –∑–∞–¥—É–º—á–∏–≤–æ –º–æ–ª—á–∏—Ç‚Ä¶ –∏ –≤–¥—Ä—É–≥ —à–µ–ø—á–µ—Ç: –ö–æ–≥—Ç–µ–≤—Ä–∞–Ω!",
  tags:["—É–º","–º—É–¥—Ä–æ—Å—Ç—å","–∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å"],
  famous:"–õ—É–Ω–∞ –õ–∞–≤–≥—É–¥, –§–∏–ª–∏—É—Å –§–ª–∏—Ç–≤–∏–∫, –ß–∂–æ—É –ß–∞–Ω–≥",
  founder:"–ö–∞–Ω–¥–∏–¥–∞ –ö–æ–≥—Ç–µ–≤—Ä–∞–Ω ‚Äî –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –±–ª–µ—Å—Ç—è—â–∏—Ö –≤–æ–ª—à–µ–±–Ω–∏—Ü —Å–≤–æ–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å–≤–æ–µ–π –º—É–¥—Ä–æ—Å—Ç—å—é –∏ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–º –ø–æ–¥—Ö–æ–¥–æ–º –∫ –º–∞–≥–∏–∏. –û–Ω–∞ —Å–æ–∑–¥–∞–ª–∞ –º–µ–Ω—è—é—â—É—é—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É –•–æ–≥–≤–∞—Ä—Ç—Å–∞ –∏ –≤–µ—Ä–∏–ª–∞, —á—Ç–æ –∑–Ω–∞–Ω–∏–µ ‚Äî –≤–µ–ª–∏—á–∞–π—à–µ–µ —Å–æ–∫—Ä–æ–≤–∏—â–µ."},
 HUF:{name:"–ü—É—Ñ—Ñ–µ–Ω–¥—É–π",emoji:"ü¶°",
  bg:"url('https://www.dropbox.com/scl/fi/k1k7nfnw0zcqdbzyzrwhu/17.10.25-11-41-53.jpg?rlkey=zqa6sw1ccikq4flbxg9xdenal&st=b21sphcl&dl=1')",
  crest:"https://www.dropbox.com/scl/fi/madd7q6kf6az57f9xgufx/17.10.25-10-59-23-1.jpg?rlkey=fhd78lqxhnxodcq3uaefazzf9&st=dfdedqiy&dl=1",
  desc:"–°–∞–º—ã–µ –¥–æ–±—Ä—ã–µ –∏ —Ç—Ä—É–¥–æ–ª—é–±–∏–≤—ã–µ. –ó–¥–µ—Å—å —É—á–∞—Ç –≤–µ—Ä–Ω–æ—Å—Ç–∏, —á–µ—Å—Ç–Ω–æ—Å—Ç–∏ –∏ –∑–∞–±–æ—Ç–µ –æ –¥—Ä—É–≥–∏—Ö.",
  quote:"–®–ª—è–ø–∞ –∑–∞–¥—É–º—á–∏–≤–æ –º–æ–ª—á–∏—Ç‚Ä¶ –∏ –≤–¥—Ä—É–≥ —à–µ–ø—á–µ—Ç: –ü—É—Ñ—Ñ–µ–Ω–¥—É–π!",
  tags:["–¥–æ–±—Ä–æ—Ç–∞","—Ç—Ä—É–¥–æ–ª—é–±–∏–µ","–≤–µ—Ä–Ω–æ—Å—Ç—å"],
  famous:"–ù–∏–º—Ñ–∞–¥–æ—Ä–∞ –¢–æ–Ω–∫—Å, –°–µ–¥—Ä–∏–∫ –î–∏–≥–≥–æ—Ä–∏, –ü–æ–º–æ–Ω–∞ –°—Ç–µ–±–ª—å",
  founder:"–ü–µ–Ω–µ–ª–æ–ø–∞ –ü—É—Ñ—Ñ–µ–Ω–¥—É–π ‚Äî –¥–æ–±—Ä–∞—è –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞—è –≤–æ–ª—à–µ–±–Ω–∏—Ü–∞, –∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å–≤–æ–µ–π –∑–∞–±–æ—Ç–æ–π –æ –≤—Å–µ—Ö –∂–∏–≤—ã—Ö —Å—É—â–µ—Å—Ç–≤–∞—Ö. –û–Ω–∞ —Å–æ–∑–¥–∞–ª–∞ —Å–∏—Å—Ç–µ–º—É –¥–æ–º–∞—à–Ω–∏—Ö —ç–ª—å—Ñ–æ–≤ –•–æ–≥–≤–∞—Ä—Ç—Å–∞ –∏ –≤–µ—Ä–∏–ª–∞, —á—Ç–æ —Ç—Ä—É–¥–æ–ª—é–±–∏–µ –∏ –≤–µ—Ä–Ω–æ—Å—Ç—å ‚Äî –æ—Å–Ω–æ–≤–∞ –∏—Å—Ç–∏–Ω–Ω–æ–π –º–∞–≥–∏–∏."}
};

/* ===== –ü–ò–¢–ê–ù–ù–Ø (15) ===== */
const QUESTIONS=[
{q:"–ö–æ–≥–¥–∞ —Ç—ã —Å—Ç–æ–∏—à—å –ø–µ—Ä–µ–¥ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º ‚Äî —á—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—à—å –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ?",a:{–ê:["–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ","RAV"],–ë:["–ê–∑–∞—Ä—Ç","GRYF"],–í:["–û—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å","HUF"],–ì:["–ù–µ–¥–æ–≤–µ—Ä–∏–µ","SLY"]}},
{q:"–¢–µ–±–µ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —Å–∏–ª—É, –Ω–æ –∑–∞ –Ω–µ—ë –Ω—É–∂–Ω–æ –∑–∞–ø–ª–∞—Ç–∏—Ç—å —á–µ–º-—Ç–æ –≤–∞–∂–Ω—ã–º. –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å?",a:{–ê:["–ü—Ä–∏–º—É ‚Äî –≤—Å—ë –∏–º–µ–µ—Ç —Ü–µ–Ω—É","SLY"],–ë:["–û—Ç–∫–∞–∂—É—Å—å, –º–Ω–µ –∏ —Ç–∞–∫ —Ö–≤–∞—Ç–∞–µ—Ç","HUF"],–í:["–ü–æ–ø—Ä–æ–±—É—é –æ–±–æ–π—Ç–∏ —É—Å–ª–æ–≤–∏—è","RAV"],–ì:["–í–æ–∑—å–º—É, –µ—Å–ª–∏ —ç—Ç–æ —Ä–∞–¥–∏ —Ü–µ–ª–∏","GRYF"]}},
{q:"–ï—Å–ª–∏ –±—ã —É —Ç–µ–±—è –±—ã–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç–µ—Ä–µ—Ç—å –æ–¥–Ω–æ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ, —Ç—ã –±—ã —Å–¥–µ–ª–∞–ª —ç—Ç–æ?",a:{–ê:["–î–∞, –Ω–µ –≤—Å—ë —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å","HUF"],–ë:["–ù–µ—Ç, –ø—Ä–æ—à–ª–æ–µ –¥–µ–ª–∞–µ—Ç –º–µ–Ω—è —Ç–µ–º, –∫—Ç–æ —è –µ—Å—Ç—å","GRYF"],–í:["–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–æ –º–µ—à–∞–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ","RAV"],–ì:["–ó–∞—á–µ–º —Å—Ç–∏—Ä–∞—Ç—å, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?","SLY"]}},
{q:"–¢—ã –∏–¥—ë—à—å –ø–æ —Ç—ë–º–Ω–æ–º—É –∫–æ—Ä–∏–¥–æ—Ä—É –∏ —Å–ª—ã—à–∏—à—å –∫—Ä–∏–∫. –ß—Ç–æ —Å–¥–µ–ª–∞–µ—à—å?",a:{–ê:["–ü–æ–±–µ–≥—É –Ω–∞ –∑–≤—É–∫","GRYF"],–ë:["–û—Å—Ç–æ—Ä–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—é","RAV"],–í:["–°–ø—Ä—è—á—É—Å—å –∏ –ø–æ–Ω–∞–±–ª—é–¥–∞—é","SLY"],–ì:["–ü–æ–∑–æ–≤—É –∫–æ–≥–æ-—Ç–æ –Ω–∞ –ø–æ–º–æ—â—å","HUF"]}},
{q:"–ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–≤–æ–µ–π –¥–æ–±—Ä–æ—Ç–æ–π, —Ç—ã‚Ä¶",a:{–ê:["–ü—Ä–æ—É—á—É –µ–≥–æ","SLY"],–ë:["–ü—Ä–æ—Å—Ç–æ –æ—Ç–¥–∞–ª—é—Å—å","HUF"],–í:["–ü–æ–ø—Ä–æ–±—É—é –ø–æ–Ω—è—Ç—å –ø—Ä–∏—á–∏–Ω—É","RAV"],–ì:["–°–¥–µ–ª–∞—é –≤–∏–¥, —á—Ç–æ –Ω–µ –∑–∞–º–µ—Ç–∏–ª","GRYF"]}},
{q:"–¢—ã —É–∑–Ω–∞—ë—à—å —á—É–∂—É—é —Ç–∞–π–Ω—É. –ß—Ç–æ –¥–∞–ª—å—à–µ?",a:{–ê:["–°–æ—Ö—Ä–∞–Ω—é –≤ —Å–µ–∫—Ä–µ—Ç–µ","HUF"],–ë:["–ü–æ–¥–æ–∂–¥—É, –ø–æ–∫–∞ —ç—Ç–æ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è","SLY"],–í:["–°–∫–∞–∂—É —Ç–æ–º—É, –∫–æ–º—É —ç—Ç–æ –º–æ–∂–µ—Ç –Ω–∞–≤—Ä–µ–¥–∏—Ç—å","GRYF"],–ì:["–†–∞—Å—Å–∫–∞–∂—É, –µ—Å–ª–∏ —ç—Ç–æ —Å–ø–∞—Å—ë—Ç –∫–æ–≥–æ-—Ç–æ","RAV"]}},
{q:"–ß—Ç–æ —Ç–µ–±–µ –ø—Ä–æ—â–µ ‚Äî –ø—Ä–æ—Å—Ç–∏—Ç—å –∏–ª–∏ –∑–∞–±—ã—Ç—å?",a:{–ê:["–ü—Ä–æ—Å—Ç–∏—Ç—å","HUF"],–ë:["–ó–∞–±—ã—Ç—å","RAV"],–í:["–ù–∏ —Ç–æ, –Ω–∏ –¥—Ä—É–≥–æ–µ","SLY"],–ì:["–í—Å—ë –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞","GRYF"]}},
{q:"–ö–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –ª—É—á—à–µ —Ç–µ–±—è, —Ç—ã‚Ä¶",a:{–ê:["–£—á—É—Å—å —É –Ω–µ–≥–æ","RAV"],–ë:["–°—Ç–∞—Ä–∞—é—Å—å –æ–±–æ–≥–Ω–∞—Ç—å","GRYF"],–í:["–†–∞–¥—É—é—Å—å –µ–≥–æ —É—Å–ø–µ—Ö—É","HUF"],–ì:["–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é, —á—Ç–æ —ç—Ç–æ –º–µ–Ω—è –∑–∞–¥–µ–ª–æ","SLY"]}},
{q:"–¢—ã –ø–æ–ª—É—á–∏–ª –≤–ª–∞—Å—Ç—å, –Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º. –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å?",a:{–ê:["–ë—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ","RAV"],–ë:["–ù–∞–π–¥—É, –≥–¥–µ –æ–Ω–∞ –ø—Ä–∏–Ω–µ—Å—ë—Ç –ø–æ–ª—å–∑—É","HUF"],–í:["–°–ø—Ä—è—á—É ‚Äî —Ç–∞–π–Ω–∞ –Ω–∞–¥—ë–∂–Ω–µ–µ —Å–∏–ª—ã","SLY"],–ì:["–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É—é –µ—ë –Ω–∞ –¥–µ–ª–µ","GRYF"]}},
{q:"–ï—Å–ª–∏ –¥—Ä—É–≥ –ø—Ä–µ–¥–∞–ª —Ç–µ–±—è, —á—Ç–æ —Å–∏–ª—å–Ω–µ–µ ‚Äî –±–æ–ª—å –∏–ª–∏ –∑–ª–æ—Å—Ç—å?",a:{–ê:["–ë–æ–ª—å","HUF"],–ë:["–ó–ª–æ—Å—Ç—å","SLY"],–í:["–†–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ","RAV"],–ì:["–ü–æ–Ω–∏–º–∞–Ω–∏–µ","GRYF"]}},
{q:"–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –∑–Ω–∞—á–∏—Ç —Å–ª–æ–≤–æ ¬´—á–µ—Å—Ç—å¬ª?",a:{–ê:["–í–µ—Ä–Ω–æ—Å—Ç—å —Å–µ–±–µ","GRYF"],–ë:["–ü—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–ª—å–∑—è –Ω–∞—Ä—É—à–∞—Ç—å","HUF"],–í:["–ò–ª–ª—é–∑–∏—è, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –æ–±—â–µ—Å—Ç–≤–æ–º","SLY"],–ì:["–ó–∞—â–∏—Ç–∞ —Ç–µ—Ö, –∫—Ç–æ –¥–æ—Ä–æ–≥","RAV"]}},
{q:"–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å —Å—Ç–∞—Ä—É—é –∫–Ω–∏–≥—É, –ø–æ–ª–Ω—É—é –æ–ø–∞—Å–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π. –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å?",a:{–ê:["–ò–∑—É—á—É, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–∏—Å–∫","RAV"],–ë:["–°–ø—Ä—è—á—É –ø–æ–¥–∞–ª—å—à–µ","HUF"],–í:["–ò—Å–ø–æ–ª—å–∑—É—é, –µ—Å–ª–∏ –ø—Ä–∏–¥—ë—Ç—Å—è","SLY"],–ì:["–ü–æ–¥–µ–ª—é—Å—å —Å —Ç–µ–º, –∫—Ç–æ –º—É–¥—Ä–µ–µ","GRYF"]}},
{q:"–ï—Å–ª–∏ –¥–∞—é—Ç –≤—ã–±–æ—Ä –º–µ–∂–¥—É –ª—ë–≥–∫–∏–º –ø—É—Ç—ë–º –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º, —á—Ç–æ –≤—ã–±–µ—Ä–µ—à—å?",a:{–ê:["–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π, –¥–∞–∂–µ –µ—Å–ª–∏ –±–æ–ª—å–Ω–æ","GRYF"],–ë:["–õ—ë–≥–∫–∏–π ‚Äî –∑–∞—á–µ–º —É—Å–ª–æ–∂–Ω—è—Ç—å","SLY"],–í:["–ó–∞–≤–∏—Å—è—â–∏–π –æ—Ç —Ü–µ–ª–∏","RAV"],–ì:["–¢–æ—Ç, –≥–¥–µ —Å–º–æ–≥—É –ø–æ–º–æ—á—å –¥—Ä—É–≥–∏–º","HUF"]}},
{q:"–ö–∞–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ç—ã —Ü–µ–Ω–∏—à—å –≤ —Å–µ–±–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",a:{–ê:["–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ","HUF"],–ë:["–°–º–µ–ª–æ—Å—Ç—å","GRYF"],–í:["–¢–µ—Ä–ø–µ–Ω–∏–µ","RAV"],–ì:["–£–º–µ–Ω–∏–µ –≤–∏–¥–µ—Ç—å —Å—É—Ç—å","SLY"]}},
{q:"–ö–æ–≥–¥–∞ –Ω–∏–∫—Ç–æ –Ω–µ —Å–º–æ—Ç—Ä–∏—Ç ‚Äî –∫–µ–º —Ç—ã —è–≤–ª—è–µ—à—å—Å—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?",a:{–ê:["–¢–µ–º, –∫—Ç–æ —É—Å—Ç–∞–ª –ø—Ä–∏—Ç–≤–æ—Ä—è—Ç—å—Å—è","HUF"],–ë:["–¢–µ–º, –∫—Ç–æ –≤—Å—ë –≤—Ä–µ–º—è –∏—â–µ—Ç","RAV"],–í:["–¢–µ–º, –∫—Ç–æ –∑–Ω–∞–µ—Ç –±–æ–ª—å—à–µ, —á–µ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç","SLY"],–ì:["–¢–µ–º, –∫—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–∫–æ—è","GRYF"]}}
];

/* ===== –õ–û–ì–ò–ö–ê ===== */
let i=0,score={GRYF:0,SLY:0,RAV:0,HUF:0};
const sStart=document.getElementById('screen-start'),sQuiz=document.getElementById('screen-quiz'),sRes=document.getElementById('screen-result');
const qEl=document.getElementById('q'),ans=document.getElementById('answers'),bar=document.getElementById('bar'),badge=document.getElementById('badge');
const crestEl = document.getElementById('crest');
const magicCandles = document.getElementById('magic-candles');
const backgroundMusic = document.getElementById('background-music');
const hatQuoteEl = document.getElementById('hat-quote');
const founderContainer = document.getElementById('founder-container');
const founderHistory = document.getElementById('founder-history');
const historyToggle = document.getElementById('history-toggle');

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—É–∑—ã–∫–æ–π
let isMusicPlaying = false;

function toggleMusic() {
    if (isMusicPlaying) {
        backgroundMusic.pause();
        document.querySelectorAll('.music-control').forEach(btn => btn.innerHTML = 'üîá');
    } else {
        backgroundMusic.play().catch(e => console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ'));
        document.querySelectorAll('.music-control').forEach(btn => btn.innerHTML = 'üéµ');
    }
    isMusicPlaying = !isMusicPlaying;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –º—É–∑—ã–∫–∏
document.querySelectorAll('.music-control').forEach(btn => {
    btn.onclick = toggleMusic;
});

document.getElementById('btn-start').onclick=start;
document.getElementById('again').onclick=()=>location.reload();
document.getElementById('share').onclick=shareResult;

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è
historyToggle.onclick = function() {
    if (founderContainer.style.display === 'none') {
        founderContainer.style.display = 'block';
        historyToggle.textContent = '–°–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é';
    } else {
        founderContainer.style.display = 'none';
        historyToggle.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é';
    }
};

function start(){
  sStart.classList.remove('show');
  sQuiz.classList.add('show');
  i=0;
  score={GRYF:0,SLY:0,RAV:0,HUF:0};
  startMagicAnimations();
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫—É –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —Ç–µ—Å—Ç–∞
  if (!isMusicPlaying) {
    backgroundMusic.volume = 0.4;
    toggleMusic();
  }
  
  render();
}

function startMagicAnimations() {
  // –°–æ–∑–¥–∞–µ–º –ª–µ—Ç–∞—é—â–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã
  const magicObjects = [
    {class: 'flying-candle', emoji: 'üïØÔ∏è', count: 8},
    {class: 'flying-wand', emoji: '‚ö°', count: 5},
    {class: 'flying-broom', emoji: 'üßπ', count: 3}
  ];
  
  magicCandles.innerHTML = '';
  
  magicObjects.forEach(obj => {
    for(let k = 0; k < obj.count; k++) {
      const element = document.createElement('div');
      element.className = obj.class;
      element.innerHTML = obj.emoji;
      element.style.left = Math.random() * 100 + 'vw';
      element.style.top = Math.random() * 100 + 'vh';
      element.style.animationDelay = (Math.random() * 10) + 's';
      element.style.fontSize = (20 + Math.random() * 15) + 'px';
      magicCandles.appendChild(element);
    }
  });
}

function render(){
  const q=QUESTIONS[i],total=QUESTIONS.length;
  badge.textContent=`–í–æ–ø—Ä–æ—Å ${i+1} –∏–∑ ${total}`; bar.style.width=`${(i/total)*100}%`;
  qEl.textContent=q.q; ans.innerHTML='';
  for(const [ukLetter,[t,h]] of Object.entries(q.a)){
    const b=document.createElement('button'); 
    b.innerHTML=`<strong>${ukLetter}.</strong> ${t}`;
    b.onclick=()=>{score[h]++;next();}; 
    ans.appendChild(b);
  }
}
function next(){ if(++i<QUESTIONS.length) render(); else finish(); }

function finish(){
  sQuiz.classList.remove('show'); 
  sRes.classList.add('show');
  const houseKey=Object.entries(score).sort((a,b)=>b[1]-a[1])[0][0],h=HOUSES[houseKey];
  sRes.style.backgroundImage=h.bg;
  
  // –í—Å—Ç–∞–≤–ª—è–µ–º –≥–µ—Ä–± —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ –≤ –∑–æ–ª–æ—Ç–æ–π –∫—Ä—É–≥
  crestEl.src = h.crest;
  crestEl.alt = `–ì–µ—Ä–± ${h.name}`;
  
  // –°–∫—Ä—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  founderContainer.style.display = 'none';
  founderHistory.textContent = h.founder;
  historyToggle.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é';
  
  // –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ç—Ä–∏–≥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  hatQuoteEl.textContent = "–®–ª—è–ø–∞ –∑–∞–¥—É–º—á–∏–≤–æ –º–æ–ª—á–∏—Ç...";
  hatQuoteEl.className = "hat-quote";
  
  document.getElementById('desc').textContent=h.desc;
  const tags=document.getElementById('tags'); tags.innerHTML=''; h.tags.forEach(t=>{const s=document.createElement('span');s.className='tag';s.textContent=t;tags.appendChild(s)});
  document.getElementById('famous').textContent=`–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ª–∏—á–Ω–æ—Å—Ç–∏: ${h.famous}`;
  spawnMagic(42);
  
  // –ß–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π —à–µ–ø–æ—Ç–∞
  setTimeout(() => {
    hatQuoteEl.textContent = h.quote;
    hatQuoteEl.classList.add("hat-whisper");
  }, 1500);
  
  if(window.Telegram&&Telegram.WebApp){Telegram.WebApp.ready();Telegram.WebApp.sendData(JSON.stringify({house:h.name,score}))}
}

function spawnMagic(n=30){
  const magic=document.getElementById('magic'); magic.querySelectorAll('.spark').forEach(e=>e.remove());
  for(let k=0;k<n;k++){const s=document.createElement('div'); s.className='spark'; s.style.left=Math.random()*100+'vw'; s.style.bottom='-10vh'; s.style.animationDelay=(Math.random()*8)+'s'; s.style.opacity=(.3+Math.random()*.7).toFixed(2); magic.appendChild(s);}
}

function shareResult(){
  const title=document.getElementById('hat-quote').textContent, text=document.getElementById('desc').textContent, url=location.href;
  if(navigator.share){navigator.share({title,text,url}).catch(()=>{});}else{navigator.clipboard.writeText(`${title}\n${text}\n${url}`).then(()=>alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ ‚Äî –º–æ–∂–Ω–æ –¥–µ–ª–∏—Ç—å—Å—è!')).catch(()=>{});}
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—ã—Ç–∞–µ–º—Å—è –≤–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    backgroundMusic.volume = 0.4;
});
</script>
</body>
</html>